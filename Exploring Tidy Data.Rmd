---
title: "Exploring Tidy Data"
output: html_notebook
editor_options: 
  chunk_output_type: inline
---

##Combining idnum
```{r}
#Combines idnum and idnum_14 with "/"
combine_id <- function(country) {
      mutate(country, idnum = ifelse(idnum_14 == '', idnum, paste(idnum,idnum_14,sep = "/")))
}
```


##Lengthening the data set
```{r}
library(tidyverse)
library(devtools)
library(fs)

#Function for reducing columns
lengthen <- function(country) {
  country <- combine_id(country)
  country <- country %>%
  gather(column_name, answer, estratopri:formatq) %>%
  select(pais, year, idnum, column_name, answer)
}

argentina <- lengthen(argentina)

```

##Applying above functions to every country
```{r}
#List of all the countries
library(purrr)
countries <- list(argentina,belize, bolivia, brazil, canada, chile, colombia, costa, ecuador, elsalvador, guatemala, guyana, honduras, jamaica, mexico, nicaragua, panama, peru, suriname, usa, uruguay, venezuela)

everything <- map_dfr(countries, lengthen)


#saving individually with map, loooook up table

```


```{r}
library(tidyverse)
library(dplyr)
library(haven)

lookup <- data.frame()
column <- attributes(bolivia)$names
column





```


