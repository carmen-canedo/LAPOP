---
title: "Exploring Tidy Data"
output: html_notebook
editor_options: 
  chunk_output_type: inline
---




##Lengthening the data set
```{r}
library(tidyverse)
library(devtools)
library(fs)

#Function for reducing columns
lengthen <- function(country) {
  country <- country %>%
  gather(column_name, answer, estratopri:formatq) %>%
  select(pais, year, unique_id, column_name, answer)
  return(country)
}


```

##Applying above functions to every country
```{r}
#Adds all the countries, in correct tidy format into a large data set

library(purrr)
countries <- list(argentina,belize, bolivia, brazil, canada, chile, colombia, costa, ecuador, elsalvador, guatemala, guyana, honduras, jamaica, mexico, nicaragua, panama, peru, suriname, usa, uruguay, venezuela)

everything <- map_df(countries, lengthen)


#Then adds a column to the merged data set that distinguishes if the question is universal or not

#everything <- everything %>% mutate(common = column_name %in% all_common_col)


```

```{r}
library(purrr)

countries_2016 <- list(venezuela_2016_17, bolivia_2016_17, brazil_2016_17, canada_2016_17, chile_2016_17, colombia_2016_17,costa_2016_17, ecuador_2016_17, elsalvador_2016_17, guatemala_2016_17, guyana_2016_17, honduras_2016_17, jamaica_2016_17, mexico_2016_17, nicaragua_2016_17, panama_2016_17, peru_2016_17, usa_2016_17, uruguay_2016_17)

every_2016 <- map_dfr(countries_2016, shrink)



```

```{r}
library(tidyr)
library(tidyverse)

every <- spread(everything, answer, column_name)
```



